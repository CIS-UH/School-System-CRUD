<html data-mdb-theme="dark">
    <head>
        <title>Teacher</title>
        <style>
            p {
                text-align: center;
                justify-content: center;
            }
            h1 {
                text-align: center;
                justify-content: center;
            }

            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding: 0;
                background-color: #f0f0f0;
                }
                        
        </style>
        <meta charset="utf-8">
        <!-- MDB -->
        <link
        href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.min.css"
        rel="stylesheet"
        />
    </head>
    <body>
        <h1>Welcome To the Teacher Page!</h1>
        <p>This is where you can manage teacher-related information.</p>
        <div class="container text-center p-4">  
            <h2>Please perform a function</h2>
            <br>  

            <div class="card p-3">
                <form id="get" method="POST">
                    <h3>Return Teachers in a Specific Classroom</h3>
                    <br>
                    <div class="row">
                        <div><input type="submit" class="btn btn-primary" id = "getButton" value ="GET" formaction="/teacher/get"> <br> <br>
                        </div>
                        <div data-mdb-input-init class="form-outline">
                            <input type="number" name="room_id_get" class="form-control bg-dark" required/>
                            <label class="form-label ms-2" for="room_id" >Room ID</label>
                        </div>
                    </div>
                </form>
                <br>
                <div class="row">
                    <div data-mdb-input-init class="form-outline">
                        <textarea readonly class="form-control" id="getOutput">
                            <% if(getData != null) { %>
                                <%= getData %>
                            <% } %>
                        </textarea>
                    </div>
                </div>
            </div>

            <!-- POST -->
            <br>
            <div class="card p-3">
                <form id="post" method="POST">
                    <h4>Add A Teacher to a Classroom</h4> <br>
                    <div>
                        <input type="submit" class="btn btn-primary" value="POST" formaction="/teacher/post" />
                        <br> <br>
                        <input type="text" name="room_id_post" placeholder="Room" required>
                        <input type="text"  name="firstname_post" placeholder="First Name" required>
                        <input type="text"  name="lastname_post" placeholder="Last Name" required>
                    </div>
                </form>
            </div>

            <!-- PUT -->
            <br>
            <div class="card p-3">
                <form id="put" method = "POST">
                    <h4>Upadate A Teacher</h4> <br>
                    <input type="submit" class="btn btn-primary" value="PUT" formaction="/teacher" />
                    <br> <br>
                    <input type="text" placeholder = "ID" required />
                    <input type="text" placeholder = "First Name" required />
                    <input type="text" placeholder= "Last Name" required />
                    <input type="text" placeholder= "Room" required />
                </form>
            </div>

            <!-- DELETE -->
            <br>
            <div id="del" class="card p-3">
                <form method = "POST">
                    <h4>Remove A Teacher From A Classroom</h4> <br>
                    <input type="submit" class="btn btn-primary" value="DELETE" formaction="/teacher" />
                    <br> <br>
                    <input type="text" placeholder = "ID" required/>
                </form>
                
        </div>

        <!-- MDB -->
        <script>
        type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.2.0/mdb.umd.min.js"
        </script>
        <script>
            document.getElementById('getButton').addEventListener('click', async () => {
                const room = document.getElementById('room_id').value;
                try {
                    const response = await fetch(`http://localhost:5000/api/teacher/get?room=${room}`);
                    if (response.ok) {
                        const data = await response.json();
                        displayTeacherData(data);
                    } else {
                        throw new Error('Failed to fetch data');
                    }
                } catch (error) {
                    console.error('Error fetching data:', error);
                }
            });
    
            function displayTeacherData(data) {
                const teacherDataContainer = document.getElementById('teacherData');
                teacherDataContainer.innerHTML = ''; 
                data.forEach(teacher => {
                    const div = document.createElement('div');
                    div.textContent = `${teacher.name} - ${teacher.room}`;
                    teacherDataContainer.appendChild(div);
                });
            }
        </script>
    
    </body>
</html>